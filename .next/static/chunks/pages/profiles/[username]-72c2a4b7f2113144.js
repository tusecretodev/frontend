(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[776],{8648:function(e,s,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/profiles/[username]",function(){return a(9686)}])},4423:function(e,s,a){"use strict";a.d(s,{Z:function(){return components_BanScreen}});var t=a(5893),r=a(7294),l=a(1373);let n=(0,l.Z)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),i=(0,l.Z)("message-circle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]),o=(0,l.Z)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),c=(0,l.Z)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);var components_BanScreen=e=>{let{onClose:s}=e,[a,l]=(0,r.useState)(null),[d,x]=(0,r.useState)(!0);(0,r.useEffect)(()=>{checkBanStatus()},[]);let checkBanStatus=async()=>{try{let e=localStorage.getItem("token");if(!e){x(!1);return}let s=await fetch("https://api.tusecreto.net/api/announcements/ban-status",{headers:{Authorization:"Bearer ".concat(e)}});if(s.ok){let e=await s.json();l(e)}}catch(e){console.error("Error checking ban status:",e)}finally{x(!1)}};return d?(0,t.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:(0,t.jsx)("div",{className:"bg-white dark:bg-gray-900 rounded-2xl p-8 max-w-md w-full",children:(0,t.jsxs)("div",{className:"animate-pulse",children:[(0,t.jsx)("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-3/4 mb-4"}),(0,t.jsx)("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/2 mb-2"}),(0,t.jsx)("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-2/3"})]})})}):(null==a?void 0:a.isBanned)?(0,t.jsx)("div",{className:"fixed inset-0 bg-gradient-to-br from-red-900 via-red-800 to-black z-[9999] flex items-center justify-center p-4",children:(0,t.jsxs)("div",{className:"bg-white dark:bg-gray-900 rounded-2xl shadow-2xl max-w-lg w-full overflow-hidden border-2 border-red-500",children:[(0,t.jsx)("div",{className:"bg-red-500 dark:bg-red-600 p-6 text-white",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"p-2 bg-white/20 rounded-full",children:(0,t.jsx)(n,{className:"w-6 h-6"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-xl font-bold",children:"Cuenta Suspendida"}),(0,t.jsx)("p",{className:"text-red-100 text-sm",children:"Tu acceso ha sido restringido"})]})]})}),(0,t.jsxs)("div",{className:"p-6 space-y-4",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Has sido baneado permanentemente de esta p\xe1gina"}),(0,t.jsx)("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:"Tu cuenta ha sido suspendida por violar nuestras normas de la comunidad."})]}),(0,t.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-4 space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)(i,{className:"w-5 h-5 text-gray-500 mt-0.5 flex-shrink-0"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Raz\xf3n del baneo:"}),(0,t.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:a.reason||"No se especific\xf3 una raz\xf3n"})]})]}),a.bannedAt&&(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(o,{className:"w-5 h-5 text-gray-500 flex-shrink-0"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Fecha del baneo:"}),(0,t.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:new Date(a.bannedAt).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]})]}),a.bannedBy&&(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(c,{className:"w-5 h-5 text-gray-500 flex-shrink-0"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Moderador:"}),(0,t.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:a.bannedBy})]})]})]}),(0,t.jsxs)("div",{className:"border-t dark:border-gray-700 pt-4",children:[(0,t.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3 text-center",children:"Si crees que este baneo es un error, puedes apelar la decisi\xf3n:"}),(0,t.jsxs)("a",{href:a.appealUrl||"https://discord.gg/wy5s5tkZ",target:"_blank",rel:"noopener noreferrer",className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-medium py-3 px-4 rounded-lg transition-colors duration-200 flex items-center justify-center gap-2",children:[(0,t.jsx)(i,{className:"w-4 h-4"}),"Apelar en Discord"]})]}),(0,t.jsx)("button",{onClick:()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.reload()},className:"w-full bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-gray-900 dark:text-white font-medium py-2 px-4 rounded-lg transition-colors duration-200",children:"Cerrar Sesi\xf3n"})]})]})}):null}},3936:function(e,s,a){"use strict";var t=a(5893);a(7294),s.Z=e=>{let{username:s,className:a="",showPrefix:r=!1,size:l="xs"}=e,n="admin"===s;return(0,t.jsxs)("span",{className:"".concat((()=>{switch(l){case"xs":default:return"text-xs";case"sm":return"text-sm";case"md":return"text-base";case"lg":return"text-lg"}})()," ").concat(a),style:n?n?{color:"#dc2626",fontWeight:"bold"}:{}:{color:"var(--text-secondary)"},children:[r&&"por ",n?"Admin":s]})}},9686:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return UserProfile}});var t=a(5893),r=a(7294),l=a(1163),n=a(1955),i=a(7435),o=a(4423),c=a(6893),d=a(5380),x=a(3936);function UserProfile(){let{theme:e}=(0,d.F)(),s=(0,l.useRouter)(),{username:a}=s.query,[m,h]=(0,r.useState)(null),[u,g]=(0,r.useState)(null),[p,b]=(0,r.useState)(!0),[f,y]=(0,r.useState)(!1),[j,v]=(0,r.useState)(!1),[N,k]=(0,r.useState)({bio:"",allowPrivateMessages:!0});(0,r.useEffect)(()=>{n.Z.get("token");let e=n.Z.get("username");h(e||null),e&&checkBanStatus(),a&&fetchProfile()},[a]);let checkBanStatus=async()=>{try{let e=n.Z.get("token");if(!e)return;let s=await fetch("https://api.tusecreto.net/api/announcements/ban-status",{headers:{Authorization:"Bearer ".concat(e)}});if(s.ok){let e=await s.json();e.isBanned&&y(!0)}}catch(e){console.error("Error checking ban status:",e)}},fetchProfile=async()=>{try{let e={},t=n.Z.get("token");t&&(e.Authorization="Bearer ".concat(t));let r=await fetch("https://api.tusecreto.net/api/profiles/".concat(a),{headers:e});if(r.ok){let e=await r.json();g(e),k({bio:e.bio,allowPrivateMessages:e.allowPrivateMessages})}else 404===r.status&&s.push("/404")}catch(e){console.error("Error fetching profile:",e)}finally{b(!1)}},saveSettings=async()=>{try{let e=n.Z.get("token");if(!e)return;let s=await fetch("https://api.tusecreto.net/api/profiles/settings",{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify(N)});if(s.ok)v(!1),fetchProfile();else{let e=await s.json();alert(e.message||"Error actualizando configuraciones")}}catch(e){console.error("Error saving settings:",e),alert("Error actualizando configuraciones")}},handleLogin=()=>{s.push("/")},handleLogout=()=>{n.Z.remove("token"),n.Z.remove("username"),s.push("/")};return f?(0,t.jsx)(o.Z,{}):p?(0,t.jsx)(i.Z,{user:m,onLogin:handleLogin,onLogout:handleLogout,children:(0,t.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto"}),(0,t.jsx)("p",{className:"mt-4",style:{color:"var(--text-secondary)"},children:"Cargando perfil..."})]})})}):u?(0,t.jsx)(i.Z,{user:m,onLogin:handleLogin,onLogout:handleLogout,children:(0,t.jsx)("div",{className:"min-h-screen pt-24 pb-8 px-4",children:(0,t.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,t.jsx)("div",{className:"rounded-2xl border p-8 mb-6",style:{backgroundColor:"dark"===e?"rgba(0, 0, 0, 0.3)":"rgba(255, 255, 255, 0.9)",borderColor:"dark"===e?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.1)"},children:(0,t.jsxs)("div",{className:"flex flex-col md:flex-row items-start gap-6",children:[(0,t.jsxs)("div",{className:"flex flex-col items-center text-center",children:[(0,t.jsx)("div",{className:"w-24 h-24 rounded-full flex items-center justify-center mb-4",style:{backgroundColor:"dark"===e?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.1)"},children:(0,t.jsx)(c.fzv,{size:32,style:{color:"var(--text-primary)"}})}),(0,t.jsx)("h1",{className:"text-2xl font-bold mb-2",style:{color:"var(--text-primary)"},children:(0,t.jsx)(x.Z,{username:u.username,size:"lg"})}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm opacity-60",children:[(0,t.jsx)(c.vlc,{size:14}),(0,t.jsxs)("span",{children:["Miembro desde ",new Date(u.stats.memberSince).toLocaleDateString()]})]})]}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsx)("h3",{className:"font-bold",style:{color:"var(--text-primary)"},children:"Biograf\xeda"}),u.isOwnProfile&&(0,t.jsx)("button",{onClick:()=>v(!j),className:"p-2 rounded-lg transition-colors duration-200",style:{backgroundColor:"dark"===e?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.05)",color:"var(--text-primary)"},children:j?(0,t.jsx)(c.q5L,{size:16}):(0,t.jsx)(c.Nte,{size:16})})]}),j?(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("textarea",{value:N.bio,onChange:e=>k(s=>({...s,bio:e.target.value})),placeholder:"Cu\xe9ntanos sobre ti...",maxLength:200,rows:3,className:"w-full px-4 py-3 rounded-lg border transition-colors duration-200 resize-none",style:{backgroundColor:"dark"===e?"rgba(255, 255, 255, 0.05)":"rgba(255, 255, 255, 0.8)",borderColor:"dark"===e?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.1)",color:"var(--text-primary)"}}),(0,t.jsxs)("p",{className:"text-xs opacity-60",children:[N.bio.length,"/200 caracteres"]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("input",{type:"checkbox",id:"allowMessages",checked:N.allowPrivateMessages,onChange:e=>k(s=>({...s,allowPrivateMessages:e.target.checked})),className:"w-4 h-4"}),(0,t.jsx)("label",{htmlFor:"allowMessages",className:"text-sm",style:{color:"var(--text-primary)"},children:"Permitir mensajes privados"})]}),(0,t.jsxs)("button",{onClick:saveSettings,className:"flex items-center gap-2 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors duration-200",children:[(0,t.jsx)(c.mW3,{size:16}),"Guardar cambios"]})]}):(0,t.jsx)("p",{style:{color:"var(--text-secondary)"},children:u.bio||"Sin biograf\xeda"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("p",{className:"text-2xl font-bold",style:{color:"var(--text-primary)"},children:u.stats.secretsCount}),(0,t.jsx)("p",{className:"text-sm opacity-60",children:"Secretos"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("p",{className:"text-2xl font-bold",style:{color:"var(--text-primary)"},children:u.stats.totalViews}),(0,t.jsx)("p",{className:"text-sm opacity-60",children:"Visualizaciones"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("p",{className:"text-2xl font-bold",style:{color:"var(--text-primary)"},children:u.stats.totalLikes}),(0,t.jsx)("p",{className:"text-sm opacity-60",children:"Likes"})]})]}),!u.isOwnProfile&&m&&(0,t.jsxs)("button",{onClick:()=>{if(!m){alert("Debes iniciar sesi\xf3n para enviar mensajes");return}if(!(null==u?void 0:u.allowPrivateMessages)){alert("Este usuario no acepta mensajes privados");return}s.push("/messages?user=".concat(a))},disabled:!u.allowPrivateMessages,className:"flex items-center gap-2 px-6 py-3 rounded-lg font-medium transition-all duration-200 ".concat(u.allowPrivateMessages?"bg-blue-500 text-white hover:bg-blue-600 hover:scale-105":"opacity-50 cursor-not-allowed"),style:{backgroundColor:u.allowPrivateMessages?void 0:"dark"===e?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.05)"},children:[(0,t.jsx)(c.EQ9,{size:18}),u.allowPrivateMessages?"Enviar mensaje privado":"No acepta mensajes"]})]})]})}),(0,t.jsxs)("div",{className:"rounded-2xl border p-6",style:{backgroundColor:"dark"===e?"rgba(0, 0, 0, 0.3)":"rgba(255, 255, 255, 0.9)",borderColor:"dark"===e?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.1)"},children:[(0,t.jsx)("h2",{className:"text-xl font-bold mb-6",style:{color:"var(--text-primary)"},children:"Secretos recientes"}),0===u.recentSecrets.length?(0,t.jsx)("div",{className:"text-center py-12",children:(0,t.jsx)("p",{style:{color:"var(--text-secondary)"},children:u.isOwnProfile?"No has compartido secretos a\xfan":"Este usuario no ha compartido secretos"})}):(0,t.jsx)("div",{className:"space-y-4",children:u.recentSecrets.map(a=>(0,t.jsxs)("button",{onClick:()=>s.push("/secret/".concat(a.id)),className:"w-full p-4 rounded-lg border text-left transition-all duration-200 hover:scale-[1.02]",style:{backgroundColor:"dark"===e?"rgba(255, 255, 255, 0.05)":"rgba(0, 0, 0, 0.02)",borderColor:"dark"===e?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.1)"},children:[(0,t.jsx)("h3",{className:"font-bold mb-2",style:{color:"var(--text-primary)"},children:a.title}),(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4 opacity-60",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(c.rDJ,{size:14}),(0,t.jsx)("span",{children:a.views})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(c.$aX,{size:14}),(0,t.jsx)("span",{children:a.likes})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(c.IC0,{size:14}),(0,t.jsx)("span",{children:a.comments})]})]}),(0,t.jsx)("span",{className:"opacity-60",children:new Date(a.createdAt).toLocaleDateString()})]})]},a.id))})]})]})})}):(0,t.jsx)(i.Z,{user:m,onLogin:handleLogin,onLogout:handleLogout,children:(0,t.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold mb-4",style:{color:"var(--text-primary)"},children:"Usuario no encontrado"}),(0,t.jsx)("p",{style:{color:"var(--text-secondary)"},children:"Este usuario no existe o ha sido suspendido"})]})})})}},1163:function(e,s,a){e.exports=a(9974)}},function(e){e.O(0,[415,917,435,774,888,179],function(){return e(e.s=8648)}),_N_E=e.O()}]);