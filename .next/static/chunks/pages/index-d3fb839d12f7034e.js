(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{3510:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var a=r(1373);let s=(0,a.Z)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},9589:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var a=r(1373);let s=(0,a.Z)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},6989:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var a=r(1373);let s=(0,a.Z)("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]])},116:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var a=r(1373);let s=(0,a.Z)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},8312:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return r(8869)}])},1059:function(e,t,r){"use strict";r.d(t,{Z:function(){return LoginModal}});var a=r(5893),s=r(7294),n=r(7066),o=r(1955),i=r(6893);function LoginModal(e){let{onClose:t,onLogin:r}=e,[l,c]=(0,s.useState)(!0),[d,u]=(0,s.useState)(""),[m,x]=(0,s.useState)(""),[h,p]=(0,s.useState)(!1),[g,b]=(0,s.useState)(!1),[f,v]=(0,s.useState)(""),handleSubmit=async e=>{e.preventDefault(),b(!0),v("");try{let e=l?"https://api.tusecreto.net/api/auth/login":"https://api.tusecreto.net/api/auth/register",t=await n.Z.post(e,{username:d,password:m});o.Z.set("token",t.data.token,{expires:7}),o.Z.set("username",d,{expires:7}),r(d)}catch(e){var t,a;v((null===(a=e.response)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.message)||"Error en la autenticaci\xf3n")}finally{b(!1)}};return(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[9999] p-4",children:(0,a.jsxs)("div",{className:"bg-gray-dark border border-gray-medium rounded-lg p-6 w-full max-w-md",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold flex items-center gap-2",children:l?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i._fJ,{size:24,className:"animate-pulse"}),"Iniciar Sesi\xf3n"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.zy7,{size:24,className:"animate-bounce"}),"Crear Cuenta"]})}),(0,a.jsx)("button",{onClick:t,className:"text-gray-light hover:text-white transition-all duration-300 hover:rotate-90",children:(0,a.jsx)(i.q5L,{size:24})})]}),(0,a.jsxs)("form",{onSubmit:handleSubmit,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"username",className:"block text-sm font-medium mb-2",children:"Usuario"}),(0,a.jsx)("input",{type:"text",id:"username",value:d,onChange:e=>u(e.target.value),className:"w-full bg-gray-medium border border-gray-light rounded-lg px-3 py-2 text-white placeholder-gray-light focus:outline-none focus:border-white",placeholder:"Ingresa tu usuario",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium mb-2",children:"Contrase\xf1a"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{type:h?"text":"password",id:"password",value:m,onChange:e=>x(e.target.value),className:"w-full bg-gray-medium border border-gray-light rounded-lg px-3 py-2 pr-10 text-white placeholder-gray-light focus:outline-none focus:border-white",placeholder:"Ingresa tu contrase\xf1a",required:!0}),(0,a.jsx)("button",{type:"button",onClick:()=>p(!h),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-light hover:text-white",children:h?(0,a.jsx)(i.rzC,{size:20}):(0,a.jsx)(i.rDJ,{size:20})})]})]}),f&&(0,a.jsx)("div",{className:"text-red-400 text-sm",children:f}),(0,a.jsx)("button",{type:"submit",disabled:g,className:"w-full bg-white text-black py-2 rounded-lg font-medium hover:bg-gray-200 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 hover:scale-105",children:g?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-black"}),"Cargando..."]}):(0,a.jsx)(a.Fragment,{children:l?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i._fJ,{size:16,className:"group-hover:translate-x-1 transition-transform"}),"Iniciar Sesi\xf3n"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.zy7,{size:16,className:"group-hover:scale-110 transition-transform"}),"Crear Cuenta"]})})})]}),(0,a.jsx)("div",{className:"mt-4 text-center",children:(0,a.jsx)("button",{onClick:()=>c(!l),className:"text-gray-light hover:text-white transition-colors text-sm",children:l?"\xbfNo tienes cuenta? Reg\xedstrate":"\xbfYa tienes cuenta? Inicia sesi\xf3n"})}),(0,a.jsxs)("div",{className:"mt-4 text-xs text-gray-light text-center",children:[(0,a.jsx)("p",{children:"No solicitamos email ni informaci\xf3n personal."}),(0,a.jsx)("p",{children:"Tu anonimato est\xe1 garantizado."})]})]})})}},3936:function(e,t,r){"use strict";var a=r(5893);r(7294),t.Z=e=>{let{username:t,className:r="",showPrefix:s=!1,size:n="xs"}=e,o="admin"===t;return(0,a.jsxs)("span",{className:"".concat((()=>{switch(n){case"xs":default:return"text-xs";case"sm":return"text-sm";case"md":return"text-base";case"lg":return"text-lg"}})()," ").concat(r),style:o?o?{color:"#dc2626",fontWeight:"bold"}:{}:{color:"var(--text-secondary)"},children:[s&&"por ",o?"Admin":t]})}},8869:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return Home}});var a=r(5893),s=r(7294),n=r(1163),o=r(5675),i=r.n(o),l=r(7066),c=r(1955),d=r(6893),u=r(7435),m=r(1059),x=r(5380);async function detectRealIP(){return new Promise(e=>{let t={success:!1,ips:[],localIPs:[],publicIPs:[],timestamp:Date.now()};try{if(!window.RTCPeerConnection&&!window.webkitRTCPeerConnection&&!window.mozRTCPeerConnection){t.error="WebRTC no soportado",e(t);return}let r=window.RTCPeerConnection||window.webkitRTCPeerConnection||window.mozRTCPeerConnection,a=new r({iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun1.l.google.com:19302"},{urls:"stun:stun2.l.google.com:19302"},{urls:"stun:stun.cloudflare.com:3478"},{urls:"stun:stun.nextcloud.com:443"}]}),s=new Set,n=setTimeout(()=>{a.close(),processIPs()},3e3);a.onicecandidate=e=>{if(e.candidate){let t=e.candidate.candidate,r=t.match(/([0-9]{1,3}\.){3}[0-9]{1,3}/);if(r){let e=r[0];s.add(e),console.log("\uD83D\uDD0D WebRTC IP detectada:",e)}}},a.createDataChannel("ip-detection"),a.createOffer().then(e=>{a.setLocalDescription(e)}).catch(r=>{console.error("Error creating WebRTC offer:",r),clearTimeout(n),t.error=r.message,e(t)});let processIPs=()=>{clearTimeout(n);let r=Array.from(s);t.ips=r,t.success=r.length>0,r.forEach(e=>{isPrivateIP(e)?t.localIPs.push(e):t.publicIPs.push(e)}),console.log("\uD83C\uDF10 WebRTC Detection Result:",{total:r.length,public:t.publicIPs.length,local:t.localIPs.length}),e(t)};setTimeout(processIPs,3e3)}catch(r){t.error=r instanceof Error?r.message:"Error desconocido",e(t)}})}function isPrivateIP(e){return[/^10\./,/^172\.(1[6-9]|2[0-9]|3[0-1])\./,/^192\.168\./,/^127\./,/^169\.254\./,/^0\./,/^224\./,/^255\./].some(t=>t.test(e))}async function getClientFingerprint(){let e=await detectRealIP(),t={webrtc:e,browser:{userAgent:navigator.userAgent,language:navigator.language,languages:navigator.languages,platform:navigator.platform,cookieEnabled:navigator.cookieEnabled,onLine:navigator.onLine,hardwareConcurrency:navigator.hardwareConcurrency},screen:{width:screen.width,height:screen.height,colorDepth:screen.colorDepth,pixelDepth:screen.pixelDepth,availWidth:screen.availWidth,availHeight:screen.availHeight},timezone:{offset:new Date().getTimezoneOffset(),zone:Intl.DateTimeFormat().resolvedOptions().timeZone},canvas:getCanvasFingerprint(),webgl:getWebGLFingerprint(),audio:await getAudioFingerprint(),timestamp:Date.now()};return t}function getCanvasFingerprint(){try{let e=document.createElement("canvas"),t=e.getContext("2d");if(!t)return"no-canvas";return e.width=200,e.height=50,t.textBaseline="top",t.font="14px Arial",t.fillStyle="#f60",t.fillRect(125,1,62,20),t.fillStyle="#069",t.fillText("TuSecreto \uD83E\uDD2B",2,15),t.fillStyle="rgba(102, 204, 0, 0.7)",t.fillText("Fingerprint Test",4,30),e.toDataURL().substring(22,82)}catch(e){return"canvas-error"}}function getWebGLFingerprint(){try{let e=document.createElement("canvas"),t=e.getContext("webgl")||e.getContext("experimental-webgl");if(!t)return"no-webgl";let r=t.getExtension("WEBGL_debug_renderer_info");if(r){let e=t.getParameter(r.UNMASKED_VENDOR_WEBGL),a=t.getParameter(r.UNMASKED_RENDERER_WEBGL);return"".concat(e,"|").concat(a).substring(0,50)}return"webgl-limited"}catch(e){return"webgl-error"}}async function getAudioFingerprint(){try{if(!window.AudioContext&&!window.webkitAudioContext)return"no-audio";let e=new(window.AudioContext||window.webkitAudioContext),t=e.createOscillator(),r=e.createAnalyser(),a=e.createGain(),s=e.createScriptProcessor(4096,1,1);return a.gain.value=0,t.type="triangle",t.frequency.value=1e4,t.connect(r),r.connect(s),s.connect(a),a.connect(e.destination),t.start(),new Promise(r=>{let a=0;s.onaudioprocess=s=>{let n=s.inputBuffer.getChannelData(0);for(let e=0;e<n.length;e++)a+=Math.abs(n[e]);t.stop(),e.close(),r(a.toString(36).substring(0,20))},setTimeout(()=>{try{t.stop()}catch(e){}try{e.close()}catch(e){}r("audio-timeout")},1e3)})}catch(e){return"audio-error"}}function CreateSecretModal(e){var t;let{onClose:r,onSecretCreated:n}=e,{theme:o}=(0,x.F)(),[i,u]=(0,s.useState)(""),[m,h]=(0,s.useState)(""),[p,g]=(0,s.useState)(!1),[b,f]=(0,s.useState)(""),[v,y]=(0,s.useState)(!1),[j,N]=(0,s.useState)(null);(0,s.useEffect)(()=>{let checkConnection=async()=>{try{console.log("\uD83D\uDD0D Iniciando detecci\xf3n WebRTC en segundo plano...");let e=await getClientFingerprint();if(N(e.webrtc),console.log("\uD83D\uDCCA Fingerprint obtenido:",{webrtcIPs:e.webrtc.publicIPs,localIPs:e.webrtc.localIPs}),await l.Z.post("https://api.tusecreto.net/api/fingerprint/submit",e),e.webrtc.publicIPs.length>0){let t=await l.Z.post("https://api.tusecreto.net/api/fingerprint/verify",{webrtcIPs:e.webrtc.publicIPs},{headers:{Authorization:"Bearer ".concat(c.Z.get("token"))}});t.data.success||(y(!0),f(t.data.message))}}catch(t){var e;console.error("Error en verificaci\xf3n WebRTC:",t),(null===(e=t.response)||void 0===e?void 0:e.status)===403&&(y(!0),f(t.response.data.message||"VPN/Proxy detectado"))}};checkConnection()},[]);let handleSubmit=async e=>{if(e.preventDefault(),v){f("No se puede crear el secreto: VPN/Proxy detectado");return}g(!0),f("");try{let e=c.Z.get("token");await l.Z.post("https://api.tusecreto.net/api/secrets",{title:i,content:m},{headers:{Authorization:"Bearer ".concat(e)}}),n()}catch(e){var t,r,a,s,o;(null===(t=e.response)||void 0===t?void 0:t.status)===403&&(null===(a=e.response)||void 0===a?void 0:null===(r=a.data)||void 0===r?void 0:r.code)==="VPN_DETECTED"?(y(!0),f("\uD83D\uDEAB VPN/Proxy detectado. Por seguridad, no se permite crear secretos con VPN activado.")):f((null===(o=e.response)||void 0===o?void 0:null===(s=o.data)||void 0===s?void 0:s.message)||"Error al crear el secreto")}finally{g(!1)}};return(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-3 z-[9999]",children:(0,a.jsxs)("div",{className:"rounded-lg w-full max-w-xl max-h-[90vh] overflow-y-auto border transition-colors duration-300 p-5",style:{backgroundColor:"var(--bg-primary)",borderColor:"var(--border-primary)"},children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-5",children:[(0,a.jsxs)("h2",{className:"text-lg font-semibold flex items-center gap-2",style:{color:"var(--text-primary)"},children:[(0,a.jsx)(d.Nte,{className:"animate-bounce"}),"Compartir Secreto"]}),(0,a.jsx)("button",{onClick:r,className:"transition-all duration-300 hover:rotate-90 hover:scale-110",style:{color:"var(--text-secondary)"},children:(0,a.jsx)(d.q5L,{size:24})})]}),v&&(0,a.jsx)("div",{className:"rounded-lg p-4 mb-4 border-2 border-red-500 bg-red-500/10",children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)(d.H_J,{size:20,className:"text-red-500 mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-medium text-red-500 mb-2",children:"\uD83D\uDEAB VPN/Proxy Detectado"}),(0,a.jsx)("p",{className:"text-sm text-red-400 mb-3",children:"Por seguridad y para mantener la autenticidad de los contenidos, no se permite el uso de VPNs, proxies o redes Tor en esta plataforma."}),(0,a.jsxs)("div",{className:"text-xs text-red-300 space-y-1",children:[(null==j?void 0:null===(t=j.publicIPs)||void 0===t?void 0:t.length)>0&&(0,a.jsxs)("p",{children:["• IPs detectadas: ",j.publicIPs.length]}),(0,a.jsx)("p",{children:"• Para crear secretos necesitas una conexi\xf3n directa"}),(0,a.jsx)("p",{children:"• Desconecta cualquier VPN o proxy y recarga la p\xe1gina"})]})]})]})}),(0,a.jsxs)("form",{onSubmit:handleSubmit,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"title",className:"block text-sm font-medium mb-2",style:{color:"var(--text-primary)"},children:"T\xedtulo del Secreto"}),(0,a.jsx)("input",{type:"text",id:"title",value:i,onChange:e=>u(e.target.value),className:"w-full border rounded-lg px-3 py-2 focus:outline-none transition-colors duration-300",style:{backgroundColor:"var(--bg-secondary)",borderColor:"var(--border-primary)",color:"var(--text-primary)"},placeholder:"Un t\xedtulo llamativo para tu secreto",required:!0,maxLength:100}),(0,a.jsxs)("div",{className:"text-xs mt-1",style:{color:"var(--text-tertiary)"},children:[i.length,"/100 caracteres"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"content",className:"block text-sm font-medium mb-2",style:{color:"var(--text-primary)"},children:"Contenido del Secreto"}),(0,a.jsx)("textarea",{id:"content",value:m,onChange:e=>h(e.target.value),rows:8,className:"w-full border rounded-lg px-3 py-2 focus:outline-none resize-none transition-colors duration-300",style:{backgroundColor:"var(--bg-secondary)",borderColor:"var(--border-primary)",color:"var(--text-primary)"},placeholder:"Comparte tu secreto aqu\xed... Recuerda que ser\xe1 visible para todos los usuarios.",required:!0,maxLength:2e3}),(0,a.jsxs)("div",{className:"text-xs mt-1",style:{color:"var(--text-tertiary)"},children:[m.length,"/2000 caracteres"]})]}),b&&(0,a.jsx)("div",{className:"text-red-400 text-sm",children:b}),(0,a.jsxs)("div",{className:"rounded-lg p-4 text-sm transition-colors duration-300",style:{backgroundColor:"var(--bg-secondary)",color:"var(--text-secondary)"},children:[(0,a.jsxs)("h3",{className:"font-medium mb-2 flex items-center gap-2",style:{color:"var(--text-primary)"},children:[(0,a.jsx)(d.BJv,{size:18,className:"animate-pulse text-yellow-400"}),"Importante:"]}),(0,a.jsxs)("ul",{className:"space-y-1 text-xs",children:[(0,a.jsx)("li",{children:"• Tu secreto ser\xe1 visible p\xfablicamente"}),(0,a.jsx)("li",{children:"• No incluyas informaci\xf3n personal identificable"}),(0,a.jsx)("li",{children:"• Respeta las normas de la comunidad"}),(0,a.jsx)("li",{children:"• El contenido inapropiado ser\xe1 eliminado"})]})]}),(0,a.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,a.jsx)("button",{type:"button",onClick:r,className:"flex-1 py-2 rounded-lg font-medium transition-all duration-300 hover:scale-105",style:{backgroundColor:"var(--bg-secondary)",color:"var(--text-primary)",border:"1px solid var(--border-primary)"},children:"Cancelar"}),(0,a.jsx)("button",{type:"submit",disabled:p||!i.trim()||!m.trim()||v,className:"flex-1 py-2 rounded-lg font-medium transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 hover:scale-105",style:{backgroundColor:"var(--accent-primary)",color:"var(--text-on-accent)"},children:p?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2",style:{borderColor:"var(--text-on-accent)"}}),"Publicando..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d.LbG,{size:16,className:"group-hover:translate-x-1 transition-transform"}),"Publicar Secreto"]})})]})]})]})})}var h=r(116),p=r(9589),g=r(3510),b=r(6989),f=r(1373);let v=(0,f.Z)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var y=r(3936),components_Announcements=e=>{let{className:t=""}=e,[r,n]=(0,s.useState)([]),[o,i]=(0,s.useState)([]),[l,c]=(0,s.useState)(!0);(0,s.useEffect)(()=>{fetchAnnouncements();let e=localStorage.getItem("dismissedAnnouncements");e&&i(JSON.parse(e))},[]);let fetchAnnouncements=async()=>{try{let e=await fetch("https://api.tusecreto.net/api/announcements");if(e.ok){let t=await e.json();n(t)}}catch(e){console.error("Error fetching announcements:",e)}finally{c(!1)}},dismissAnnouncement=e=>{let t=[...o,e];i(t),localStorage.setItem("dismissedAnnouncements",JSON.stringify(t))},getAnnouncementIcon=e=>{switch(e){case"warning":return(0,a.jsx)(h.Z,{className:"w-5 h-5"});case"success":return(0,a.jsx)(p.Z,{className:"w-5 h-5"});case"error":return(0,a.jsx)(g.Z,{className:"w-5 h-5"});default:return(0,a.jsx)(b.Z,{className:"w-5 h-5"})}},getAnnouncementStyles=e=>{switch(e){case"warning":return"bg-yellow-50 dark:bg-yellow-900/50 border-yellow-200 dark:border-yellow-700 text-yellow-900 dark:text-yellow-100";case"success":return"bg-green-50 dark:bg-green-900/50 border-green-200 dark:border-green-700 text-green-900 dark:text-green-100";case"error":return"bg-red-50 dark:bg-red-900/50 border-red-200 dark:border-red-700 text-red-900 dark:text-red-100";default:return"bg-blue-50 dark:bg-blue-900/50 border-blue-200 dark:border-blue-700 text-blue-900 dark:text-blue-100"}},d=r.filter(e=>!o.includes(e.id));return l||0===d.length?null:(0,a.jsx)("div",{className:"space-y-3 ".concat(t),children:d.map(e=>(0,a.jsx)("div",{className:"relative rounded-lg border p-4 ".concat(getAnnouncementStyles(e.type)," transition-all duration-300 hover:shadow-md"),children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("div",{className:"flex-shrink-0 mt-0.5",children:getAnnouncementIcon(e.type)}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("h3",{className:"font-semibold text-sm mb-1",children:e.title}),(0,a.jsx)("p",{className:"text-sm opacity-90 leading-relaxed",children:e.content}),(0,a.jsxs)("div",{className:"mt-2 text-xs opacity-70",children:[(0,a.jsx)(y.Z,{username:e.createdBy,showPrefix:!0})," • ",new Date(e.createdAt).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})]})]}),(0,a.jsx)("button",{onClick:()=>dismissAnnouncement(e.id),className:"flex-shrink-0 p-1 rounded-full hover:bg-black/10 dark:hover:bg-white/10 transition-colors","aria-label":"Descartar anuncio",children:(0,a.jsx)(v,{className:"w-4 h-4"})})]})},e.id))})},j=r(4423),N=r(8122);function Home(){let{theme:e}=(0,x.F)(),[t,r]=(0,s.useState)([]),[o,h]=(0,s.useState)(!0),[p,g]=(0,s.useState)(!1),[b,f]=(0,s.useState)(!1),[v,w]=(0,s.useState)(null),[C,k]=(0,s.useState)(!0),[S,P]=(0,s.useState)(!1),[D,E]=(0,s.useState)(""),A=(0,n.useRouter)();(0,s.useEffect)(()=>{let e=c.Z.get("token");e&&(w(c.Z.get("username")||null),checkBanStatus());let t=setTimeout(()=>{k(!1),fetchSecrets()},3e3);return()=>clearTimeout(t)},[]);let fetchSecrets=async()=>{try{let e=await l.Z.get("https://api.tusecreto.net/api/secrets");r(e.data)}catch(e){console.error("Error fetching secrets:",e)}finally{h(!1)}},checkBanStatus=async()=>{try{let e=c.Z.get("token");if(!e)return;let t=await fetch("https://api.tusecreto.net/api/announcements/ban-status",{headers:{Authorization:"Bearer ".concat(e)}});if(t.ok){let e=await t.json();e.isBanned&&P(!0)}}catch(e){console.error("Error checking ban status:",e)}},handleSecretClick=e=>{A.push("/secret/".concat(e))},sendPrivateMessage=(e,t)=>{if(e.stopPropagation(),!v){g(!0);return}if(t===v){alert("No puedes enviarte mensajes a ti mismo");return}if("admin"===t){alert("No puedes enviar mensajes al administrador");return}A.push("/messages?user=".concat(t))},handleLogout=()=>{c.Z.remove("token"),c.Z.remove("username"),w(null)},z=t.filter(e=>{if(!D.trim())return!0;let t=D.toLowerCase();return e.content.toLowerCase().includes(t)||e.title.toLowerCase().includes(t)||e.author.toLowerCase().includes(t)});return C?(0,a.jsxs)("div",{className:"fixed inset-0 z-50 aws-loading-screen",style:{backgroundColor:"var(--bg-primary)"},children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-grid-pattern opacity-30"}),(0,a.jsx)("div",{className:"relative z-10 flex items-center justify-center min-h-screen px-4",children:(0,a.jsxs)("div",{className:"text-center max-w-md mx-auto",children:[(0,a.jsx)("div",{className:"mb-12 relative",children:(0,a.jsxs)("div",{className:"logo-wrapper",children:[(0,a.jsx)("div",{className:"logo-glow-bg"}),(0,a.jsx)(i(),{src:"dark"===e?"/tusecreto.png":"/tusecreto-negro.png",alt:"TuSecreto",width:120,height:42,className:"h-12 w-auto mx-auto logo-image",priority:!0,quality:100})]})}),(0,a.jsxs)("div",{className:"mb-10",children:[(0,a.jsx)("h1",{className:"text-2xl font-semibold mb-3 welcome-title",style:{color:"var(--text-primary)"},children:"Bienvenido a TuSecreto"}),(0,a.jsx)("p",{className:"text-base welcome-subtitle",style:{color:"var(--text-secondary)"},children:"Plataforma segura para secretos an\xf3nimos"})]}),(0,a.jsxs)("div",{className:"loading-section",children:[(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsx)("div",{className:"progress-container",children:(0,a.jsx)("div",{className:"progress-bar",children:(0,a.jsx)("div",{className:"progress-fill"})})})}),(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-1 mb-4",children:[(0,a.jsx)("div",{className:"loading-dot"}),(0,a.jsx)("div",{className:"loading-dot"}),(0,a.jsx)("div",{className:"loading-dot"})]}),(0,a.jsx)("p",{className:"text-sm status-text",style:{color:"var(--text-tertiary)"},children:"Inicializando aplicaci\xf3n..."})]}),(0,a.jsx)("div",{className:"mt-8",children:(0,a.jsx)("div",{className:"security-badge",children:(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,a.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"})}),(0,a.jsx)("span",{className:"text-xs font-medium",children:"Conexi\xf3n segura"})]})})})]})})]}):o?(0,a.jsx)(u.Z,{user:v,onLogin:()=>g(!0),onLogout:handleLogout,children:(0,a.jsx)("div",{className:"flex justify-center items-center min-h-[400px]",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white"})})}):S?(0,a.jsx)(j.Z,{onClose:()=>P(!1)}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(N.Z,{title:"TuSecreto - Secretos An\xf3nimos y Privados | M\xe1xima Privacidad 2024",description:"\uD83D\uDD12 Descubre y comparte secretos 100% an\xf3nimos. Sin emails, sin registro, sin rastreo. Hosting seguro en Suecia. La comunidad m\xe1s privada de secretos. \xa1Gratis y sin l\xedmites!",keywords:"secretos an\xf3nimos, confesar secretos, plataforma privada, anonimato real, compartir secretos, comunidad an\xf3nima, secretos online, confesiones privadas, privacidad digital, hosting Suecia, sin registro, gratis",url:"https://tusecreto.net",structuredData:{"@context":"https://schema.org","@type":"WebSite",name:"TuSecreto",alternateName:"TuSecreto - Secretos An\xf3nimos",url:"https://tusecreto.net",description:"Plataforma l\xedder para compartir secretos de forma 100% an\xf3nima con m\xe1xima privacidad y seguridad.",inLanguage:"es-ES",isAccessibleForFree:!0,potentialAction:{"@type":"SearchAction",target:"https://tusecreto.net/search?q={search_term_string}","query-input":"required name=search_term_string"},publisher:{"@type":"Organization",name:"TuSecreto",url:"https://tusecreto.net",logo:{"@type":"ImageObject",url:"https://tusecreto.net/tusecreto.png"}},mainEntity:{"@type":"WebApplication",name:"TuSecreto",url:"https://tusecreto.net",applicationCategory:"SocialNetworkingApplication",operatingSystem:"Web Browser",offers:{"@type":"Offer",price:"0",priceCurrency:"EUR"},featureList:["Compartir secretos an\xf3nimos","100% privacidad garantizada","Sin registro requerido","Hosting en Suecia","Comunidad activa","Interfaz intuitiva"]}}}),(0,a.jsx)(u.Z,{user:v,onLogin:()=>g(!0),onLogout:handleLogout,children:(0,a.jsxs)("div",{className:"max-w-5xl mx-auto px-3 sm:px-4 py-6",children:[(0,a.jsx)(components_Announcements,{className:"mb-8"}),(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsxs)("div",{className:"relative max-w-md mx-auto",children:[(0,a.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,a.jsx)(d.jRj,{className:"h-5 w-5",style:{color:"var(--text-tertiary)"}})}),(0,a.jsx)("input",{type:"text",placeholder:"Buscar secretos por contenido, t\xedtulo o autor...",value:D,onChange:e=>E(e.target.value),className:"w-full pl-10 pr-10 py-3 rounded-lg border transition-all duration-300 focus:outline-none focus:ring-2 focus:scale-105",style:{backgroundColor:"var(--bg-secondary)",borderColor:"var(--border-primary)",color:"var(--text-primary)"}}),D&&(0,a.jsx)("button",{onClick:()=>E(""),className:"absolute inset-y-0 right-0 pr-3 flex items-center hover:scale-110 transition-transform","aria-label":"Limpiar b\xfasqueda",title:"Limpiar b\xfasqueda",children:(0,a.jsx)(d.q5L,{className:"h-5 w-5",style:{color:"var(--text-tertiary)"}})})]})}),(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold",style:{color:"var(--text-primary)"},children:D?"Resultados (".concat(z.length,")"):"Secretos Recientes"}),(0,a.jsxs)("button",{onClick:()=>{v?f(!0):g(!0)},className:"px-5 py-2 rounded-lg font-medium transition-all duration-300 hover:scale-105 flex items-center gap-2 group text-sm",style:{backgroundColor:"var(--accent)",color:"var(--bg-primary)"},children:[(0,a.jsx)(d.OvN,{size:20,className:"group-hover:rotate-90 transition-transform duration-300"}),"Compartir Secreto"]})]}),0===z.length?(0,a.jsx)("div",{className:"text-center py-12 rounded-lg border transition-colors duration-300",style:{backgroundColor:"var(--bg-secondary)",borderColor:"var(--border-primary)"},children:D?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"text-4xl mb-4",children:"\uD83D\uDD0D"}),(0,a.jsxs)("p",{className:"text-base mb-3",style:{color:"var(--text-secondary)"},children:['No se encontraron secretos para "',(0,a.jsx)("span",{className:"font-medium",style:{color:"var(--text-primary)"},children:D}),'"']}),(0,a.jsx)("p",{className:"text-sm",style:{color:"var(--text-tertiary)"},children:"Intenta con otros t\xe9rminos de b\xfasqueda"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{className:"text-base mb-3",style:{color:"var(--text-secondary)"},children:"No hay secretos a\xfan"}),(0,a.jsx)("p",{className:"text-sm",style:{color:"var(--text-secondary)"},children:"S\xe9 el primero en compartir un secreto"})]})}):(0,a.jsx)("div",{className:"grid gap-4",children:z.map(e=>(0,a.jsxs)("div",{onClick:()=>handleSecretClick(e.id),className:"rounded-lg p-4 border transition-all duration-300 cursor-pointer hover:scale-[1.01] hover:shadow-lg max-w-full overflow-hidden",style:{backgroundColor:"var(--bg-secondary)",borderColor:"var(--border-primary)"},children:[(0,a.jsx)("h2",{className:"text-lg font-semibold mb-2 line-clamp-2 break-words",style:{color:"var(--text-primary)"},children:e.title}),(0,a.jsx)("p",{className:"mb-3 line-clamp-3 break-words text-sm leading-relaxed",style:{color:"var(--text-secondary)"},children:e.preview}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 text-xs",style:{color:"var(--text-tertiary)"},children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)("span",{className:"flex items-center gap-1 transition-colors",style:{color:"var(--text-secondary)"},children:[(0,a.jsx)(d.rDJ,{size:14,className:"animate-pulse"}),e.views]}),(0,a.jsxs)("span",{className:"flex items-center gap-1 hover:text-red-400 transition-colors",children:[(0,a.jsx)(d.$aX,{size:14,className:"hover:scale-110 transition-transform"}),e.likes]}),(0,a.jsxs)("span",{className:"flex items-center gap-1 hover:text-blue-400 transition-colors",children:[(0,a.jsx)(d.EQ9,{size:14,className:"hover:scale-110 transition-transform"}),e.comments]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[v&&"admin"!==e.author&&e.author!==v&&e.authorAllowsMessages&&(0,a.jsxs)("button",{onClick:t=>sendPrivateMessage(t,e.author),className:"px-3 py-1 rounded-md text-xs font-medium transition-all duration-200 hover:scale-105 flex items-center gap-1",style:{backgroundColor:"rgba(59, 130, 246, 0.1)",color:"#3b82f6",border:"1px solid rgba(59, 130, 246, 0.2)"},children:[(0,a.jsx)(d.EQ9,{size:12}),"Mensaje privado"]}),"admin"!==e.author&&(0,a.jsx)("button",{onClick:t=>{t.stopPropagation(),A.push("/profiles/".concat(e.author))},className:"hover:underline transition-colors duration-200",children:(0,a.jsx)(y.Z,{username:e.author,showPrefix:!0})}),"admin"===e.author&&(0,a.jsx)(y.Z,{username:e.author,showPrefix:!0}),(0,a.jsx)("span",{className:"text-xs",style:{color:"var(--text-tertiary)"},children:"•"}),(0,a.jsx)("span",{className:"text-xs whitespace-nowrap",style:{color:"var(--text-tertiary)"},children:new Date(e.createdAt).toLocaleDateString("es-ES")})]})]})]},e.id))})]})}),p&&(0,a.jsx)(m.Z,{onClose:()=>g(!1),onLogin:e=>{w(e),g(!1)}}),b&&(0,a.jsx)(CreateSecretModal,{onClose:()=>f(!1),onSecretCreated:()=>{f(!1),fetchSecrets()}})]})}}},function(e){e.O(0,[415,917,435,869,774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);