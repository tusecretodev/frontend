(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{3510:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var a=r(1373);let s=(0,a.Z)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},9589:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var a=r(1373);let s=(0,a.Z)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},6989:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var a=r(1373);let s=(0,a.Z)("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]])},116:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var a=r(1373);let s=(0,a.Z)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},8312:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return r(5661)}])},4423:function(e,t,r){"use strict";r.d(t,{Z:function(){return components_BanScreen}});var a=r(5893),s=r(7294),n=r(1373);let o=(0,n.Z)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),i=(0,n.Z)("message-circle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]),l=(0,n.Z)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),c=(0,n.Z)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);var components_BanScreen=e=>{let{onClose:t}=e,[r,n]=(0,s.useState)(null),[d,m]=(0,s.useState)(!0);(0,s.useEffect)(()=>{checkBanStatus()},[]);let checkBanStatus=async()=>{try{let e=localStorage.getItem("token");if(!e){m(!1);return}let t=await fetch("/api/announcements/ban-status",{headers:{Authorization:"Bearer ".concat(e)}});if(t.ok){let e=await t.json();n(e)}}catch(e){console.error("Error checking ban status:",e)}finally{m(!1)}};return d?(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:(0,a.jsx)("div",{className:"bg-white dark:bg-gray-900 rounded-2xl p-8 max-w-md w-full",children:(0,a.jsxs)("div",{className:"animate-pulse",children:[(0,a.jsx)("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-3/4 mb-4"}),(0,a.jsx)("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/2 mb-2"}),(0,a.jsx)("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-2/3"})]})})}):(null==r?void 0:r.isBanned)?(0,a.jsx)("div",{className:"fixed inset-0 bg-gradient-to-br from-red-900 via-red-800 to-black z-[9999] flex items-center justify-center p-4",children:(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-900 rounded-2xl shadow-2xl max-w-lg w-full overflow-hidden border-2 border-red-500",children:[(0,a.jsx)("div",{className:"bg-red-500 dark:bg-red-600 p-6 text-white",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-2 bg-white/20 rounded-full",children:(0,a.jsx)(o,{className:"w-6 h-6"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-bold",children:"Cuenta Suspendida"}),(0,a.jsx)("p",{className:"text-red-100 text-sm",children:"Tu acceso ha sido restringido"})]})]})}),(0,a.jsxs)("div",{className:"p-6 space-y-4",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Has sido baneado permanentemente de esta p\xe1gina"}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:"Tu cuenta ha sido suspendida por violar nuestras normas de la comunidad."})]}),(0,a.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-4 space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)(i,{className:"w-5 h-5 text-gray-500 mt-0.5 flex-shrink-0"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Raz\xf3n del baneo:"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:r.reason||"No se especific\xf3 una raz\xf3n"})]})]}),r.bannedAt&&(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(l,{className:"w-5 h-5 text-gray-500 flex-shrink-0"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Fecha del baneo:"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:new Date(r.bannedAt).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]})]}),r.bannedBy&&(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(c,{className:"w-5 h-5 text-gray-500 flex-shrink-0"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Moderador:"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:r.bannedBy})]})]})]}),(0,a.jsxs)("div",{className:"border-t dark:border-gray-700 pt-4",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3 text-center",children:"Si crees que este baneo es un error, puedes apelar la decisi\xf3n:"}),(0,a.jsxs)("a",{href:r.appealUrl||"https://discord.gg/d4cKETRmcd",target:"_blank",rel:"noopener noreferrer",className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-medium py-3 px-4 rounded-lg transition-colors duration-200 flex items-center justify-center gap-2",children:[(0,a.jsx)(i,{className:"w-4 h-4"}),"Apelar en Discord"]})]}),(0,a.jsx)("button",{onClick:()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.reload()},className:"w-full bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-gray-900 dark:text-white font-medium py-2 px-4 rounded-lg transition-colors duration-200",children:"Cerrar Sesi\xf3n"})]})]})}):null}},1059:function(e,t,r){"use strict";r.d(t,{Z:function(){return LoginModal}});var a=r(5893),s=r(7294),n=r(7066),o=r(1955),i=r(6893);function LoginModal(e){let{onClose:t,onLogin:r}=e,[l,c]=(0,s.useState)(!0),[d,m]=(0,s.useState)(""),[u,x]=(0,s.useState)(""),[h,p]=(0,s.useState)(!1),[g,f]=(0,s.useState)(!1),[y,b]=(0,s.useState)(""),handleSubmit=async e=>{e.preventDefault(),f(!0),b("");try{let e=l?"/api/auth/login":"/api/auth/register",t=await n.Z.post(e,{username:d,password:u});o.Z.set("token",t.data.token,{expires:7}),o.Z.set("username",d,{expires:7}),r(d)}catch(e){var t,a;b((null===(a=e.response)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.message)||"Error en la autenticaci\xf3n")}finally{f(!1)}};return(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[9999] p-4",children:(0,a.jsxs)("div",{className:"bg-gray-dark border border-gray-medium rounded-lg p-6 w-full max-w-md",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold flex items-center gap-2",children:l?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i._fJ,{size:24,className:"animate-pulse"}),"Iniciar Sesi\xf3n"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.zy7,{size:24,className:"animate-bounce"}),"Crear Cuenta"]})}),(0,a.jsx)("button",{onClick:t,className:"text-gray-light hover:text-white transition-all duration-300 hover:rotate-90",children:(0,a.jsx)(i.q5L,{size:24})})]}),(0,a.jsxs)("form",{onSubmit:handleSubmit,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"username",className:"block text-sm font-medium mb-2",children:"Usuario"}),(0,a.jsx)("input",{type:"text",id:"username",value:d,onChange:e=>m(e.target.value),className:"w-full bg-gray-medium border border-gray-light rounded-lg px-3 py-2 text-white placeholder-gray-light focus:outline-none focus:border-white",placeholder:"Ingresa tu usuario",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium mb-2",children:"Contrase\xf1a"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{type:h?"text":"password",id:"password",value:u,onChange:e=>x(e.target.value),className:"w-full bg-gray-medium border border-gray-light rounded-lg px-3 py-2 pr-10 text-white placeholder-gray-light focus:outline-none focus:border-white",placeholder:"Ingresa tu contrase\xf1a",required:!0}),(0,a.jsx)("button",{type:"button",onClick:()=>p(!h),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-light hover:text-white",children:h?(0,a.jsx)(i.rzC,{size:20}):(0,a.jsx)(i.rDJ,{size:20})})]})]}),y&&(0,a.jsx)("div",{className:"text-red-400 text-sm",children:y}),(0,a.jsx)("button",{type:"submit",disabled:g,className:"w-full bg-white text-black py-2 rounded-lg font-medium hover:bg-gray-200 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 hover:scale-105",children:g?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-black"}),"Cargando..."]}):(0,a.jsx)(a.Fragment,{children:l?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i._fJ,{size:16,className:"group-hover:translate-x-1 transition-transform"}),"Iniciar Sesi\xf3n"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.zy7,{size:16,className:"group-hover:scale-110 transition-transform"}),"Crear Cuenta"]})})})]}),(0,a.jsx)("div",{className:"mt-4 text-center",children:(0,a.jsx)("button",{onClick:()=>c(!l),className:"text-gray-light hover:text-white transition-colors text-sm",children:l?"\xbfNo tienes cuenta? Reg\xedstrate":"\xbfYa tienes cuenta? Inicia sesi\xf3n"})}),(0,a.jsxs)("div",{className:"mt-4 text-xs text-gray-light text-center",children:[(0,a.jsx)("p",{children:"No solicitamos email ni informaci\xf3n personal."}),(0,a.jsx)("p",{children:"Tu anonimato est\xe1 garantizado."})]})]})})}},8122:function(e,t,r){"use strict";var a=r(5893),s=r(9008),n=r.n(s);t.Z=e=>{let{title:t="TuSecreto - Plataforma An\xf3nima para Compartir Secretos",description:r="Comparte tus secretos de forma 100% an\xf3nima. Sin emails, sin datos personales. Hosting en Suecia con m\xe1xima privacidad y seguridad.",keywords:s="secretos an\xf3nimos, confesar secretos, plataforma an\xf3nima, privacidad total, compartir secretos, anonimato real",image:o="https://secretos.tusecreto.net/tusecreto.png",url:i="https://secretos.tusecreto.net",type:l="website",publishedTime:c,modifiedTime:d,author:m,noindex:u=!1}=e,x=t.includes("TuSecreto")?t:"".concat(t," | TuSecreto");return(0,a.jsxs)(n(),{children:[(0,a.jsx)("title",{children:x}),(0,a.jsx)("meta",{name:"title",content:x}),(0,a.jsx)("meta",{name:"description",content:r}),(0,a.jsx)("meta",{name:"keywords",content:s}),u&&(0,a.jsx)("meta",{name:"robots",content:"noindex, nofollow"}),(0,a.jsx)("link",{rel:"canonical",href:i}),(0,a.jsx)("meta",{property:"og:type",content:l}),(0,a.jsx)("meta",{property:"og:url",content:i}),(0,a.jsx)("meta",{property:"og:title",content:x}),(0,a.jsx)("meta",{property:"og:description",content:r}),(0,a.jsx)("meta",{property:"og:image",content:o}),(0,a.jsx)("meta",{property:"og:image:width",content:"1200"}),(0,a.jsx)("meta",{property:"og:image:height",content:"630"}),(0,a.jsx)("meta",{property:"og:image:alt",content:x}),(0,a.jsx)("meta",{property:"og:site_name",content:"TuSecreto"}),(0,a.jsx)("meta",{property:"og:locale",content:"es_ES"}),"article"===l&&c&&(0,a.jsx)("meta",{property:"article:published_time",content:c}),"article"===l&&d&&(0,a.jsx)("meta",{property:"article:modified_time",content:d}),"article"===l&&m&&(0,a.jsx)("meta",{property:"article:author",content:m}),(0,a.jsx)("meta",{name:"twitter:card",content:"summary_large_image"}),(0,a.jsx)("meta",{name:"twitter:url",content:i}),(0,a.jsx)("meta",{name:"twitter:title",content:x}),(0,a.jsx)("meta",{name:"twitter:description",content:r}),(0,a.jsx)("meta",{name:"twitter:image",content:o}),(0,a.jsx)("meta",{name:"twitter:image:alt",content:x}),(0,a.jsx)("meta",{name:"twitter:site",content:"@tusecreto"}),(0,a.jsx)("meta",{name:"twitter:creator",content:"@tusecreto"})]})}},5661:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return Home}});var a=r(5893),s=r(7294),n=r(1163),o=r(7066),i=r(1955),l=r(6893),c=r(7435),d=r(1059),m=r(5380);async function detectRealIP(){return new Promise(e=>{let t={success:!1,ips:[],localIPs:[],publicIPs:[],timestamp:Date.now()};try{if(!window.RTCPeerConnection&&!window.webkitRTCPeerConnection&&!window.mozRTCPeerConnection){t.error="WebRTC no soportado",e(t);return}let r=window.RTCPeerConnection||window.webkitRTCPeerConnection||window.mozRTCPeerConnection,a=new r({iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun1.l.google.com:19302"},{urls:"stun:stun2.l.google.com:19302"},{urls:"stun:stun.cloudflare.com:3478"},{urls:"stun:stun.nextcloud.com:443"}]}),s=new Set,n=setTimeout(()=>{a.close(),processIPs()},3e3);a.onicecandidate=e=>{if(e.candidate){let t=e.candidate.candidate,r=t.match(/([0-9]{1,3}\.){3}[0-9]{1,3}/);if(r){let e=r[0];s.add(e),console.log("\uD83D\uDD0D WebRTC IP detectada:",e)}}},a.createDataChannel("ip-detection"),a.createOffer().then(e=>{a.setLocalDescription(e)}).catch(r=>{console.error("Error creating WebRTC offer:",r),clearTimeout(n),t.error=r.message,e(t)});let processIPs=()=>{clearTimeout(n);let r=Array.from(s);t.ips=r,t.success=r.length>0,r.forEach(e=>{isPrivateIP(e)?t.localIPs.push(e):t.publicIPs.push(e)}),console.log("\uD83C\uDF10 WebRTC Detection Result:",{total:r.length,public:t.publicIPs.length,local:t.localIPs.length}),e(t)};setTimeout(processIPs,3e3)}catch(r){t.error=r instanceof Error?r.message:"Error desconocido",e(t)}})}function isPrivateIP(e){return[/^10\./,/^172\.(1[6-9]|2[0-9]|3[0-1])\./,/^192\.168\./,/^127\./,/^169\.254\./,/^0\./,/^224\./,/^255\./].some(t=>t.test(e))}async function getClientFingerprint(){let e=await detectRealIP(),t={webrtc:e,browser:{userAgent:navigator.userAgent,language:navigator.language,languages:navigator.languages,platform:navigator.platform,cookieEnabled:navigator.cookieEnabled,onLine:navigator.onLine,hardwareConcurrency:navigator.hardwareConcurrency},screen:{width:screen.width,height:screen.height,colorDepth:screen.colorDepth,pixelDepth:screen.pixelDepth,availWidth:screen.availWidth,availHeight:screen.availHeight},timezone:{offset:new Date().getTimezoneOffset(),zone:Intl.DateTimeFormat().resolvedOptions().timeZone},canvas:getCanvasFingerprint(),webgl:getWebGLFingerprint(),audio:await getAudioFingerprint(),timestamp:Date.now()};return t}function getCanvasFingerprint(){try{let e=document.createElement("canvas"),t=e.getContext("2d");if(!t)return"no-canvas";return e.width=200,e.height=50,t.textBaseline="top",t.font="14px Arial",t.fillStyle="#f60",t.fillRect(125,1,62,20),t.fillStyle="#069",t.fillText("TuSecreto \uD83E\uDD2B",2,15),t.fillStyle="rgba(102, 204, 0, 0.7)",t.fillText("Fingerprint Test",4,30),e.toDataURL().substring(22,82)}catch(e){return"canvas-error"}}function getWebGLFingerprint(){try{let e=document.createElement("canvas"),t=e.getContext("webgl")||e.getContext("experimental-webgl");if(!t)return"no-webgl";let r=t.getExtension("WEBGL_debug_renderer_info");if(r){let e=t.getParameter(r.UNMASKED_VENDOR_WEBGL),a=t.getParameter(r.UNMASKED_RENDERER_WEBGL);return"".concat(e,"|").concat(a).substring(0,50)}return"webgl-limited"}catch(e){return"webgl-error"}}async function getAudioFingerprint(){try{if(!window.AudioContext&&!window.webkitAudioContext)return"no-audio";let e=new(window.AudioContext||window.webkitAudioContext),t=e.createOscillator(),r=e.createAnalyser(),a=e.createGain(),s=e.createScriptProcessor(4096,1,1);return a.gain.value=0,t.type="triangle",t.frequency.value=1e4,t.connect(r),r.connect(s),s.connect(a),a.connect(e.destination),t.start(),new Promise(r=>{let a=0;s.onaudioprocess=s=>{let n=s.inputBuffer.getChannelData(0);for(let e=0;e<n.length;e++)a+=Math.abs(n[e]);t.stop(),e.close(),r(a.toString(36).substring(0,20))},setTimeout(()=>{try{t.stop()}catch(e){}try{e.close()}catch(e){}r("audio-timeout")},1e3)})}catch(e){return"audio-error"}}function CreateSecretModal(e){var t;let{onClose:r,onSecretCreated:n}=e,{theme:c}=(0,m.F)(),[d,u]=(0,s.useState)(""),[x,h]=(0,s.useState)(""),[p,g]=(0,s.useState)(!1),[f,y]=(0,s.useState)(""),[b,v]=(0,s.useState)(!1),[j,w]=(0,s.useState)(null);(0,s.useEffect)(()=>{let checkConnection=async()=>{try{console.log("\uD83D\uDD0D Iniciando detecci\xf3n WebRTC en segundo plano...");let e=await getClientFingerprint();if(w(e.webrtc),console.log("\uD83D\uDCCA Fingerprint obtenido:",{webrtcIPs:e.webrtc.publicIPs,localIPs:e.webrtc.localIPs}),await o.Z.post("/api/fingerprint/submit",e),e.webrtc.publicIPs.length>0){let t=await o.Z.post("/api/fingerprint/verify",{webrtcIPs:e.webrtc.publicIPs},{headers:{Authorization:"Bearer ".concat(i.Z.get("token"))}});t.data.success||(v(!0),y(t.data.message))}}catch(t){var e;console.error("Error en verificaci\xf3n WebRTC:",t),(null===(e=t.response)||void 0===e?void 0:e.status)===403&&(v(!0),y(t.response.data.message||"VPN/Proxy detectado"))}};checkConnection()},[]);let handleSubmit=async e=>{if(e.preventDefault(),b){y("No se puede crear el secreto: VPN/Proxy detectado");return}g(!0),y("");try{let e=i.Z.get("token");await o.Z.post("/api/secrets",{title:d,content:x},{headers:{Authorization:"Bearer ".concat(e)}}),n()}catch(e){var t,r,a,s,l;(null===(t=e.response)||void 0===t?void 0:t.status)===403&&(null===(a=e.response)||void 0===a?void 0:null===(r=a.data)||void 0===r?void 0:r.code)==="VPN_DETECTED"?(v(!0),y("\uD83D\uDEAB VPN/Proxy detectado. Por seguridad, no se permite crear secretos con VPN activado.")):y((null===(l=e.response)||void 0===l?void 0:null===(s=l.data)||void 0===s?void 0:s.message)||"Error al crear el secreto")}finally{g(!1)}};return(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-3 z-[9999]",children:(0,a.jsxs)("div",{className:"rounded-lg w-full max-w-xl max-h-[90vh] overflow-y-auto border transition-colors duration-300 p-5",style:{backgroundColor:"var(--bg-primary)",borderColor:"var(--border-primary)"},children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-5",children:[(0,a.jsxs)("h2",{className:"text-lg font-semibold flex items-center gap-2",style:{color:"var(--text-primary)"},children:[(0,a.jsx)(l.Nte,{className:"animate-bounce"}),"Compartir Secreto"]}),(0,a.jsx)("button",{onClick:r,className:"transition-all duration-300 hover:rotate-90 hover:scale-110",style:{color:"var(--text-secondary)"},children:(0,a.jsx)(l.q5L,{size:24})})]}),b&&(0,a.jsx)("div",{className:"rounded-lg p-4 mb-4 border-2 border-red-500 bg-red-500/10",children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)(l.H_J,{size:20,className:"text-red-500 mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-medium text-red-500 mb-2",children:"\uD83D\uDEAB VPN/Proxy Detectado"}),(0,a.jsx)("p",{className:"text-sm text-red-400 mb-3",children:"Por seguridad y para mantener la autenticidad de los contenidos, no se permite el uso de VPNs, proxies o redes Tor en esta plataforma."}),(0,a.jsxs)("div",{className:"text-xs text-red-300 space-y-1",children:[(null==j?void 0:null===(t=j.publicIPs)||void 0===t?void 0:t.length)>0&&(0,a.jsxs)("p",{children:["• IPs detectadas: ",j.publicIPs.length]}),(0,a.jsx)("p",{children:"• Para crear secretos necesitas una conexi\xf3n directa"}),(0,a.jsx)("p",{children:"• Desconecta cualquier VPN o proxy y recarga la p\xe1gina"})]})]})]})}),(0,a.jsxs)("form",{onSubmit:handleSubmit,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"title",className:"block text-sm font-medium mb-2",style:{color:"var(--text-primary)"},children:"T\xedtulo del Secreto"}),(0,a.jsx)("input",{type:"text",id:"title",value:d,onChange:e=>u(e.target.value),className:"w-full border rounded-lg px-3 py-2 focus:outline-none transition-colors duration-300",style:{backgroundColor:"var(--bg-secondary)",borderColor:"var(--border-primary)",color:"var(--text-primary)"},placeholder:"Un t\xedtulo llamativo para tu secreto",required:!0,maxLength:100}),(0,a.jsxs)("div",{className:"text-xs mt-1",style:{color:"var(--text-tertiary)"},children:[d.length,"/100 caracteres"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"content",className:"block text-sm font-medium mb-2",style:{color:"var(--text-primary)"},children:"Contenido del Secreto"}),(0,a.jsx)("textarea",{id:"content",value:x,onChange:e=>h(e.target.value),rows:8,className:"w-full border rounded-lg px-3 py-2 focus:outline-none resize-none transition-colors duration-300",style:{backgroundColor:"var(--bg-secondary)",borderColor:"var(--border-primary)",color:"var(--text-primary)"},placeholder:"Comparte tu secreto aqu\xed... Recuerda que ser\xe1 visible para todos los usuarios.",required:!0,maxLength:2e3}),(0,a.jsxs)("div",{className:"text-xs mt-1",style:{color:"var(--text-tertiary)"},children:[x.length,"/2000 caracteres"]})]}),f&&(0,a.jsx)("div",{className:"text-red-400 text-sm",children:f}),(0,a.jsxs)("div",{className:"rounded-lg p-4 text-sm transition-colors duration-300",style:{backgroundColor:"var(--bg-secondary)",color:"var(--text-secondary)"},children:[(0,a.jsxs)("h3",{className:"font-medium mb-2 flex items-center gap-2",style:{color:"var(--text-primary)"},children:[(0,a.jsx)(l.BJv,{size:18,className:"animate-pulse text-yellow-400"}),"Importante:"]}),(0,a.jsxs)("ul",{className:"space-y-1 text-xs",children:[(0,a.jsx)("li",{children:"• Tu secreto ser\xe1 visible p\xfablicamente"}),(0,a.jsx)("li",{children:"• No incluyas informaci\xf3n personal identificable"}),(0,a.jsx)("li",{children:"• Respeta las normas de la comunidad"}),(0,a.jsx)("li",{children:"• El contenido inapropiado ser\xe1 eliminado"})]})]}),(0,a.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,a.jsx)("button",{type:"button",onClick:r,className:"flex-1 py-2 rounded-lg font-medium transition-all duration-300 hover:scale-105",style:{backgroundColor:"var(--bg-secondary)",color:"var(--text-primary)",border:"1px solid var(--border-primary)"},children:"Cancelar"}),(0,a.jsx)("button",{type:"submit",disabled:p||!d.trim()||!x.trim()||b,className:"flex-1 py-2 rounded-lg font-medium transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 hover:scale-105",style:{backgroundColor:"var(--accent-primary)",color:"var(--text-on-accent)"},children:p?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2",style:{borderColor:"var(--text-on-accent)"}}),"Publicando..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.LbG,{size:16,className:"group-hover:translate-x-1 transition-transform"}),"Publicar Secreto"]})})]})]})]})})}var u=r(116),x=r(9589),h=r(3510),p=r(6989),g=r(1373);let f=(0,g.Z)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var components_Announcements=e=>{let{className:t=""}=e,[r,n]=(0,s.useState)([]),[o,i]=(0,s.useState)([]),[l,c]=(0,s.useState)(!0);(0,s.useEffect)(()=>{fetchAnnouncements();let e=localStorage.getItem("dismissedAnnouncements");e&&i(JSON.parse(e))},[]);let fetchAnnouncements=async()=>{try{let e=await fetch("/api/announcements");if(e.ok){let t=await e.json();n(t)}}catch(e){console.error("Error fetching announcements:",e)}finally{c(!1)}},dismissAnnouncement=e=>{let t=[...o,e];i(t),localStorage.setItem("dismissedAnnouncements",JSON.stringify(t))},getAnnouncementIcon=e=>{switch(e){case"warning":return(0,a.jsx)(u.Z,{className:"w-5 h-5"});case"success":return(0,a.jsx)(x.Z,{className:"w-5 h-5"});case"error":return(0,a.jsx)(h.Z,{className:"w-5 h-5"});default:return(0,a.jsx)(p.Z,{className:"w-5 h-5"})}},getAnnouncementStyles=e=>{switch(e){case"warning":return"bg-yellow-50 dark:bg-yellow-900/50 border-yellow-200 dark:border-yellow-700 text-yellow-900 dark:text-yellow-100";case"success":return"bg-green-50 dark:bg-green-900/50 border-green-200 dark:border-green-700 text-green-900 dark:text-green-100";case"error":return"bg-red-50 dark:bg-red-900/50 border-red-200 dark:border-red-700 text-red-900 dark:text-red-100";default:return"bg-blue-50 dark:bg-blue-900/50 border-blue-200 dark:border-blue-700 text-blue-900 dark:text-blue-100"}},d=r.filter(e=>!o.includes(e.id));return l||0===d.length?null:(0,a.jsx)("div",{className:"space-y-3 ".concat(t),children:d.map(e=>(0,a.jsx)("div",{className:"relative rounded-lg border p-4 ".concat(getAnnouncementStyles(e.type)," transition-all duration-300 hover:shadow-md"),children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("div",{className:"flex-shrink-0 mt-0.5",children:getAnnouncementIcon(e.type)}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("h3",{className:"font-semibold text-sm mb-1",children:e.title}),(0,a.jsx)("p",{className:"text-sm opacity-90 leading-relaxed",children:e.content}),(0,a.jsxs)("div",{className:"mt-2 text-xs opacity-70",children:["Por ",e.createdBy," • ",new Date(e.createdAt).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})]})]}),(0,a.jsx)("button",{onClick:()=>dismissAnnouncement(e.id),className:"flex-shrink-0 p-1 rounded-full hover:bg-black/10 dark:hover:bg-white/10 transition-colors","aria-label":"Descartar anuncio",children:(0,a.jsx)(f,{className:"w-4 h-4"})})]})},e.id))})},y=r(4423),b=r(6255),v=r(6173),components_ThreeJSLoader=e=>{let{className:t=""}=e,r=(0,s.useRef)(null),n=(0,s.useRef)(null),o=(0,s.useRef)(null),i=(0,s.useRef)(null);return(0,s.useEffect)(()=>{if(!r.current)return;let e=new b.xsS;n.current=e;let t=new b.cPb(75,1,.1,1e3);t.position.z=5;let a=new v.CP7({antialias:!0,alpha:!0,powerPreference:"low-power"});a.setSize(200,200),a.setPixelRatio(Math.min(window.devicePixelRatio,2)),a.setClearColor(0,0),o.current=a,r.current.appendChild(a.domElement);let s=[],l=new b.fHI(.3,.3,.05,6);for(let t=0;t<15;t++){let t=new b.xoR({color:new b.Ilk().setHSL(.6+.2*Math.random(),.7,.5),transparent:!0,opacity:.3+.4*Math.random(),shininess:100}),r=new b.Kj0(l,t);r.position.x=(Math.random()-.5)*8,r.position.y=(Math.random()-.5)*6,r.position.z=(Math.random()-.5)*4,r.rotation.x=Math.random()*Math.PI,r.rotation.y=Math.random()*Math.PI,r.rotation.z=Math.random()*Math.PI,s.push(r),e.add(r)}let c=new b.Mig(4210752,.6);e.add(c);let d=new b.Ox3(16777215,.8);d.position.set(5,5,5),e.add(d);let m=new b.cek(8947848,.5);m.position.set(-3,-3,3),e.add(m);let u=0,animate=()=>{u+=.01,s.forEach((e,t)=>{e.rotation.x+=.005+.001*t,e.rotation.y+=.003+5e-4*t,e.rotation.z+=.002+3e-4*t,e.position.y+=.002*Math.sin(2*u+t),e.position.x+=.001*Math.cos(1.5*u+t);let r=.2+.3*Math.sin(3*u+t);e.material.opacity=Math.max(.1,r)}),a.render(e,t),i.current=requestAnimationFrame(animate)};animate();let handleResize=()=>{if(a&&r.current){let e=Math.min(r.current.clientWidth,r.current.clientHeight,200);a.setSize(e,e)}};return window.addEventListener("resize",handleResize),handleResize(),()=>{window.removeEventListener("resize",handleResize),i.current&&cancelAnimationFrame(i.current),r.current&&a.domElement&&r.current.removeChild(a.domElement),e.traverse(e=>{e instanceof b.Kj0&&(e.geometry.dispose(),Array.isArray(e.material)?e.material.forEach(e=>e.dispose()):e.material.dispose())}),a.dispose()}},[]),(0,a.jsx)("div",{ref:r,className:"flex items-center justify-center ".concat(t),style:{width:"200px",height:"200px",margin:"0 auto"}})},j=r(8122);function Home(){let[e,t]=(0,s.useState)([]),[r,m]=(0,s.useState)(!0),[u,x]=(0,s.useState)(!1),[h,p]=(0,s.useState)(!1),[g,f]=(0,s.useState)(null),[b,v]=(0,s.useState)(!0),[w,N]=(0,s.useState)(!1),k=(0,n.useRouter)();(0,s.useEffect)(()=>{let e=i.Z.get("token");e&&(f(i.Z.get("username")||null),checkBanStatus());let t=setTimeout(()=>{v(!1),fetchSecrets()},3e3);return()=>clearTimeout(t)},[]);let fetchSecrets=async()=>{try{let e=await o.Z.get("/api/secrets");t(e.data)}catch(e){console.error("Error fetching secrets:",e)}finally{m(!1)}},checkBanStatus=async()=>{try{let e=i.Z.get("token");if(!e)return;let t=await fetch("/api/announcements/ban-status",{headers:{Authorization:"Bearer ".concat(e)}});if(t.ok){let e=await t.json();e.isBanned&&N(!0)}}catch(e){console.error("Error checking ban status:",e)}},handleSecretClick=e=>{k.push("/secret/".concat(e))},sendPrivateMessage=(e,t)=>{if(e.stopPropagation(),!g){x(!0);return}if(t===g){alert("No puedes enviarte mensajes a ti mismo");return}if("admin"===t){alert("No puedes enviar mensajes al administrador");return}k.push("/messages?user=".concat(t))},handleLogout=()=>{i.Z.remove("token"),i.Z.remove("username"),f(null)};return b?(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{backgroundColor:"var(--bg-primary)"},children:(0,a.jsxs)("div",{className:"text-center px-8",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(components_ThreeJSLoader,{className:"absolute inset-0 opacity-30"}),(0,a.jsx)("div",{className:"animate-emoji-bounce text-6xl mb-4 relative z-10",children:"\uD83E\uDD2B"})]}),(0,a.jsx)("h1",{className:"text-4xl font-bold mb-4 animate-fade-in",style:{color:"var(--text-primary)"},children:"Bienvenido al nuevo TuSecreto"}),(0,a.jsx)("p",{className:"text-xl animate-fade-in-delay",style:{color:"var(--text-secondary)"},children:"donde el anonimato es verdadero"})]}),(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2",style:{borderColor:"var(--accent)"}})})]})}):r?(0,a.jsx)(c.Z,{user:g,onLogin:()=>x(!0),onLogout:handleLogout,children:(0,a.jsx)("div",{className:"flex justify-center items-center min-h-[400px]",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white"})})}):w?(0,a.jsx)(y.Z,{onClose:()=>N(!1)}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(j.Z,{title:"TuSecreto - Secretos An\xf3nimos y Privados",description:"Descubre y comparte secretos de forma 100% an\xf3nima. Plataforma segura sin emails ni datos personales. \xdanete a la comunidad m\xe1s privada de secretos.",keywords:"secretos an\xf3nimos, confesar secretos, plataforma privada, anonimato real, compartir secretos, comunidad an\xf3nima",url:"https://secretos.tusecreto.net"}),(0,a.jsx)(c.Z,{user:g,onLogin:()=>x(!0),onLogout:handleLogout,children:(0,a.jsxs)("div",{className:"max-w-5xl mx-auto px-3 sm:px-4 py-6",children:[(0,a.jsx)(components_Announcements,{className:"mb-8"}),(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold",style:{color:"var(--text-primary)"},children:"Secretos Recientes"}),(0,a.jsxs)("button",{onClick:()=>{g?p(!0):x(!0)},className:"px-5 py-2 rounded-lg font-medium transition-all duration-300 hover:scale-105 flex items-center gap-2 group text-sm",style:{backgroundColor:"var(--accent)",color:"var(--bg-primary)"},children:[(0,a.jsx)(l.OvN,{size:20,className:"group-hover:rotate-90 transition-transform duration-300"}),"Compartir Secreto"]})]}),0===e.length?(0,a.jsxs)("div",{className:"text-center py-12 rounded-lg border transition-colors duration-300",style:{backgroundColor:"var(--bg-secondary)",borderColor:"var(--border-primary)"},children:[(0,a.jsx)("p",{className:"text-base mb-3",style:{color:"var(--text-secondary)"},children:"No hay secretos a\xfan"}),(0,a.jsx)("p",{className:"text-sm",style:{color:"var(--text-secondary)"},children:"S\xe9 el primero en compartir un secreto"})]}):(0,a.jsx)("div",{className:"grid gap-4",children:e.map(e=>(0,a.jsxs)("div",{onClick:()=>handleSecretClick(e.id),className:"rounded-lg p-4 border transition-all duration-300 cursor-pointer hover:scale-[1.01] hover:shadow-lg max-w-full overflow-hidden",style:{backgroundColor:"var(--bg-secondary)",borderColor:"var(--border-primary)"},children:[(0,a.jsx)("h2",{className:"text-lg font-semibold mb-2 line-clamp-2 break-words",style:{color:"var(--text-primary)"},children:e.title}),(0,a.jsx)("p",{className:"mb-3 line-clamp-3 break-words text-sm leading-relaxed",style:{color:"var(--text-secondary)"},children:e.preview}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 text-xs",style:{color:"var(--text-tertiary)"},children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)("span",{className:"flex items-center gap-1 transition-colors",style:{color:"var(--text-secondary)"},children:[(0,a.jsx)(l.rDJ,{size:14,className:"animate-pulse"}),e.views]}),(0,a.jsxs)("span",{className:"flex items-center gap-1 hover:text-red-400 transition-colors",children:[(0,a.jsx)(l.$aX,{size:14,className:"hover:scale-110 transition-transform"}),e.likes]}),(0,a.jsxs)("span",{className:"flex items-center gap-1 hover:text-blue-400 transition-colors",children:[(0,a.jsx)(l.EQ9,{size:14,className:"hover:scale-110 transition-transform"}),e.comments]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[g&&"admin"!==e.author&&e.author!==g&&e.authorAllowsMessages&&(0,a.jsxs)("button",{onClick:t=>sendPrivateMessage(t,e.author),className:"px-3 py-1 rounded-md text-xs font-medium transition-all duration-200 hover:scale-105 flex items-center gap-1",style:{backgroundColor:"rgba(59, 130, 246, 0.1)",color:"#3b82f6",border:"1px solid rgba(59, 130, 246, 0.2)"},children:[(0,a.jsx)(l.EQ9,{size:12}),"Mensaje privado"]}),"admin"!==e.author&&(0,a.jsxs)("button",{onClick:t=>{t.stopPropagation(),k.push("/profiles/".concat(e.author))},className:"text-xs hover:underline transition-colors duration-200",style:{color:"var(--text-secondary)"},children:["por ",e.author]}),"admin"===e.author&&(0,a.jsx)("span",{className:"text-xs",style:{color:"var(--text-secondary)"},children:"por admin"}),(0,a.jsx)("span",{className:"text-xs",style:{color:"var(--text-tertiary)"},children:"•"}),(0,a.jsx)("span",{className:"text-xs whitespace-nowrap",style:{color:"var(--text-tertiary)"},children:new Date(e.createdAt).toLocaleDateString("es-ES")})]})]})]},e.id))})]})}),u&&(0,a.jsx)(d.Z,{onClose:()=>x(!1),onLogin:e=>{f(e),x(!1)}}),h&&(0,a.jsx)(CreateSecretModal,{onClose:()=>p(!1),onSecretCreated:()=>{p(!1),fetchSecrets()}})]})}},9008:function(e,t,r){e.exports=r(9201)},1163:function(e,t,r){e.exports=r(9974)}},function(e){e.O(0,[415,429,549,917,66,435,774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);